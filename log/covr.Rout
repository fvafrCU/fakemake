Error: Failure in `/tmp/Rtmp4QPEea/R_LIBS529c7170666a/fakemake/fakemake-tests/runit.Rout.fail`
> #!/usr/bin/Rscript --vanilla
> is_failure <- function(result) {
+     res <- RUnit::getErrors(result)
+     names(res) <- tolower(names(res)) # soothe lintr
+     sum_of_exceptions <- res[["nerr"]] + res[["nfail"]]
+     fail <- as.logical(sum_of_exceptions)
+     return(fail)
+ }
> 
> if (interactive()) {
+     devtools::load_all(pkg = ".") # needed to use devtools' shim version of
+     # base's system.file
+     unit_dir <- system.file("inst", "runit_tests", package = "fakemake")
+ } else {
+     r_call <- commandArgs(trailingOnly = FALSE)
+     require("fakemake", quietly = TRUE, character.only = TRUE) ||
+     stop("package '", pkgname, "' not found")
+     if (any(grepl("--file", r_call))) {
+         unit_dir <- file.path("inst", "runit_tests")
+     } else {
+         unit_dir <- system.file("runit_tests", package = "fakemake")
+     }
+ }
> if (! dir.exists(unit_dir)) {
+     stop
Execution halted
